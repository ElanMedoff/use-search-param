(function(n,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],f):(n=typeof globalThis<"u"?globalThis:n||self,f(n.useSearchParam={},n.React))})(this,function(n,f){"use strict";function b(){return typeof window>"u"}function h(r){if(r==="undefined")return;if(r==="")return"";const l=Number(r);if(!Number.isNaN(l))return l;try{return JSON.parse(r)}catch{return r}}function P(r){var l=r.searchParamKey,d=r.serverSideSearchParams,e=r.sanitize,u=r.parse,i=r.validate,a=r.buildOnError,c=r.localOnError;try{var t=void 0;if(b()?typeof d=="string"?t=d:t=null:t=window.location.search,t===null)return null;var o=new URLSearchParams(t),v=o.get(l);if(v===null)return null;var S=e instanceof Function?e(v):v,s=u(S),E=i instanceof Function?i(s):s;return E}catch(m){return a==null||a(m),c==null||c(m),null}}function y(r){return r===void 0&&(r={}),function(d,e){var u,i,a;e===void 0&&(e={});var c=(i=(u=e.parse)!==null&&u!==void 0?u:r.parse)!==null&&i!==void 0?i:h,t=(a=e.sanitize)!==null&&a!==void 0?a:r.sanitize,o=e.validate,v=e.serverSideSearchParams;return P({searchParamKey:d,serverSideSearchParams:v,sanitize:t,parse:c,validate:o,buildOnError:r.onError,localOnError:e.onError})}}var z=y();function w(r){return r===void 0&&(r={}),function(d,e){var u,i,a;e===void 0&&(e={});var c=(i=(u=e.parse)!==null&&u!==void 0?u:r.parse)!==null&&i!==void 0?i:h,t=(a=e.sanitize)!==null&&a!==void 0?a:r.sanitize,o=e.validate,v=e.serverSideSearchParams;f.useEffect(function(){var m=function(){var N=P({searchParamKey:d,serverSideSearchParams:v,sanitize:t,parse:c,validate:o,buildOnError:r.onError,localOnError:e.onError});E(N)};return window.addEventListener("popstate",m),function(){window.removeEventListener("popstate",m)}},[d,v]);var S=f.useState(function(){return P({searchParamKey:d,serverSideSearchParams:v,sanitize:t,parse:c,validate:o,buildOnError:r.onError,localOnError:e.onError})}),s=S[0],E=S[1];return s}}var g=w();n.buildGetSearchParam=y,n.buildUseSearchParam=w,n.getSearchParam=z,n.useSearchParam=g,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
